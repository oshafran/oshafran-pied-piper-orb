description: >
  run newman pipeline
parameters:
  dir:
    type: string
    description: "directory of the postman configuration files"
  openapiDir:
    type: string
    description: "directory of the openapi spec"
  vManageIP:
    type: env_var_name
    default: VMANAGEIP
    description: "vManage IP to be configured"
  vManageUser:
    type: string
    description: "vManage User"
  vManagePwd:
    type: string
    description: "vManage Password"
steps:
  - run:
      environment:
        COLLECTIONS_DIR: <<parameters.dir>>
        OPENAPI_DIR: <<parameters.openapiDir>>
        VMANAGEIP: <<parameters.vManageIP>>
        VMANAGEUSER: <<parameters.vManageUser>>
        VMANAGEPASSWORD: <<parameters.vManagePwd>>
      name: Newman runner
      command: <<include(scripts/pipeline.sh)>>
